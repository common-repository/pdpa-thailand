var dateStamp,pdpa_popup=document.getElementsByClassName("dpdpa--popup"),pdpda_popup_reject_all=document.getElementById("dpdpa--popup-reject-all"),pdpa_popup_allow_all=document.getElementById("dpdpa--popup-accept-all"),pdpa_popup_settings=document.getElementsByClassName("dpdpa--popup-settings"),pdpa_popup_button_settings=document.getElementById("dpdpa--popup-button-settings"),pdpa_sidebar=document.getElementsByClassName("dpdpa--popup-sidebar"),pdpa_bg=document.getElementsByClassName("dpdpa--popup-bg"),pdpa_close=document.getElementById("dpdpa--popup-close"),pdpa_settings_close=document.getElementById("dpdpa--popup-settings-close"),dpdpa_consent=document.getElementsByName("dpdpa_consent[]"),dpdpa_consent_length=dpdpa_consent.length,dpdpa_consent_wrapper=document.getElementById("dpdpa--popup-list"),pdpa_allow_all=document.getElementById("pdpa_settings_allow_all"),pdpa_confirm=document.getElementById("pdpa_settings_confirm"),dpdpa_cookies=Cookies.get("dpdpa_consent"),dpdpa_consent_close=Cookies.get("dpdpa_consent_close");document.addEventListener("DOMContentLoaded",(function(e){init(),loadCode()}));var ajax=new XMLHttpRequest;function init(){var e=parseInt(pdpa_thailand.duration)+1,p=(parseInt(pdpa_thailand.duration),Math.floor((new Date).getTime()/1e3)),t=0;if(void 0!==dpdpa_cookies){if(""!=(dpdpa_cookies=JSON.parse(dpdpa_cookies))&&void 0!==dpdpa_cookies)for(pdpa_choices=dpdpa_cookies.choices.split(","),i=0;i<dpdpa_consent_length;i++)pdpa_choices.includes(dpdpa_consent[i].value)?dpdpa_consent[i].checked=!0:dpdpa_consent[i].checked=!1;var d=p-dpdpa_cookies.datestamp;e=Math.round(d/86400),dpdpa_cookies.uniqueID!=pdpa_thailand.unique_id&&(t=1)}(e>pdpa_thailand.duration||1==t)&&1==pdpa_thailand.enable&&setTimeout((function(){pdpa_popup[0].classList.add("active")}),500),toggleAllowAll()}if(ajax.open("POST",pdpa_thailand.url,!0),ajax.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),pdpa_popup_allow_all.addEventListener("click",(function(e){forceAllowAll(),e.preventDefault()})),pdpa_settings_allow_all.addEventListener("click",(function(e){forceAllowAll(),e.preventDefault()})),null!==pdpda_popup_reject_all&&pdpda_popup_reject_all.addEventListener("click",(function(e){rejectAll()})),pdpa_close.addEventListener("click",(function(e){rejectAll()})),pdpa_settings_close.addEventListener("click",(function(e){closePopupSettings(),e.preventDefault()})),pdpa_bg[0].addEventListener("click",(function(e){closePopupSettings(),e.preventDefault()})),null!==pdpa_popup_settings)for(var i=0;i<pdpa_popup_settings.length;i++)pdpa_popup_settings[i].addEventListener("click",(function(e){openPopupSettings(),e.preventDefault()}));function loadCode(){var e=callCookieList(),p={code_in_head:"",code_next_body:"",code_body_close:""},t=Cookies.get("dpdpa_consent");if(""!=t&&void 0!==t)for(var d in t=JSON.parse(t),pdpa_choices=t.choices.split(","),e){var a=e[d],o="";for(var n in a){var i=a[n];pdpa_choices.includes(n)&&""!=i&&(o+=i+"\n")}p[d]=o.replace(/\\/g,"")}var s=p.code_in_head,c=document.createRange();c.selectNode(document.getElementsByTagName("head")[0]);var l=c.createContextualFragment(s);document.head.appendChild(l)}function saveCookies(e){Cookies.set("dpdpa_consent",JSON.stringify(e)),document.body.classList.contains("pdpa-thailand-loaded")?location.reload():(document.body.classList.add("pdpa-thailand-loaded"),loadCode())}function prepareCookies(e){for(dpdpa_cookies=[],i=0;i<dpdpa_consent_length;i++)1==dpdpa_consent[i].checked&&dpdpa_cookies.push(dpdpa_consent[i].value);return dateStamp=Math.floor((new Date).getTime()/1e3),uniqueID=pdpa_thailand.unique_id,{uniqueID:uniqueID,datestamp:dateStamp,choices:dpdpa_cookies.join(",")}}function rejectAll(){for(closePopup(),i=0;i<dpdpa_consent_length;i++)dpdpa_consent[i].checked=!1;saveCookies(prepareCookies()),event.preventDefault()}function closePopup(){pdpa_popup[0].classList.remove("active")}function closePopupSettings(){pdpa_sidebar[0].classList.remove("active"),pdpa_bg[0].classList.remove("active")}function openPopupSettings(){pdpa_sidebar[0].classList.add("active"),pdpa_bg[0].classList.add("active")}function forceAllowAll(){for(i=0;i<dpdpa_consent_length;i++)dpdpa_consent[i].checked=!0;saveCookies(prepareCookies()),closePopupSettings(),closePopup()}function toggleAllowAll(){var e=checkAllowAll();pdpa_allow_all.style.display=1==e?"inline-block":"none"}function checkAllowAll(){var e=!1;for(i=0;i<dpdpa_consent_length;i++)if(0==dpdpa_consent[i].checked){e=!0;break}return e}null!==pdpa_popup_button_settings&&pdpa_popup_button_settings.addEventListener("click",(function(e){openPopupSettings(),e.preventDefault()})),pdpa_confirm.addEventListener("click",(function(e){saveCookies(prepareCookies()),closePopupSettings(),closePopup(),e.preventDefault()})),dpdpa_consent_wrapper.addEventListener("change",(function(e){toggleAllowAll()}));
//# sourceMappingURL=pdpa-thailand-public.min.js.map